function get_values(){if(1==$("#tower_form")[0].checkValidity()){TRIANGULATE_BTN.removeClass("btn-danger"),TRIANGULATE_BTN.addClass("btn-primary"),$(".notfound").remove(),$(".inaccurate").remove(),$(".panel").removeClass("panel-danger");for(var e=1;3>=e;e++)CID[e]=$("#CID"+e).val(),LAC[e]=$("#LAC"+e).val(),locate_tower(CID[e],LAC[e],e)}else TRIANGULATE_BTN.removeClass("btn-primary"),TRIANGULATE_BTN.addClass("btn-danger")}function plot(){var e=[];if(MARKER.length>0){for(var a=1;a<MARKER.length;a++)MARKER[a].setMap(null);"undefined"!=typeof CENTERMARKER&&CENTERMARKER.setMap(null)}for(var a=1;3>=a;a++)e[a]=new google.maps.LatLng(T_LAT[a],T_LNG[a]);for(var a=1;3>=a;a++)MARKER[a]=new google.maps.Marker({position:e[a],title:"Tower "+a});for(var a=1;3>=a;a++)MARKER[a].setMap(MAP);var n=new google.maps.LatLngBounds;e.forEach(function(e){n.extend(e)}),MAP.setCenter(n.getCenter()),MAP.fitBounds(n),CENTERMARKER=new google.maps.Marker({position:n.getCenter(),icon:"https://google-developers.appspot.com/maps/documentation/javascript/examples/full/images/beachflag.png"}),CENTERMARKER.setMap(MAP),FOUND=0}function locate_tower(e,a,n){$.ajax({url:"http://api.opensignal.com/v2/towerinfo.json?cid="+e+"&lac="+a+"&apikey=f3e1f052fe4dc4e405b9f14a2604b6f8",method:"GET",success:function(e){var a=Object.keys(e).length;if(e.hasOwnProperty("towers")&&"No towers with these identifiers"==e.towers){var o=$("#panel"+n);o.addClass("panel-danger"),o.find(".panel-heading").append('<span class="notfound"> - Not found</span>')}else if(11==a&&e.hasOwnProperty("tower1")){var t=e.tower1;T_LAT[n]=t.est_lat,T_LNG[n]=t.est_lng,FOUND++,3==FOUND&&plot()}else{var o=$("#panel"+n);o.addClass("panel-danger"),o.find(".panel-heading").append('<span class="inaccurate"> - Inaccurate tower</span>')}},error:function(e){console.log(e),alert("An unknown error has occurred, please refresh and try again.")}})}function initialize(){var e=new google.maps.LatLng(1.3514563,103.8109639),a={center:e,zoom:11};MAP=new google.maps.Map(document.getElementById("map-canvas"),a)}var CID=[],LAC=[],T_LAT=[],T_LNG=[],MARKER=[],FOUND=0,CENTERMARKER,MAP,TRIANGULATE_BTN=$("#triangulate_btn");$(document).ready(function(){$.material.init(),google.maps.event.addDomListener(window,"load",initialize),TRIANGULATE_BTN.click(function(){get_values()})});